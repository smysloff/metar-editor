!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function n(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(t,n){return t.get(e(t,n))}function i(t,e,r){n(t,e),e.set(t,r)}function a(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function l(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,l=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e);else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function s(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var U=new WeakMap,f=new WeakMap,h=new WeakSet,m=function(){return a((function t(a){var o,u,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(o=this,u=h),u.add(o),i(this,U,["text","date","time","radio","checkbox"]),i(this,f,["click","input"]),l(this,"root",null),l(this,"output",null),l(this,"elements",null),l(this,"forms",{input:null,output:null}),l(this,"result",new Map),l(this,"registry",new Map),this.root=document.querySelector(a),this.root||console.warn("can't find a form 'root' with selector ".concat(a));var s=Array.from(this.root.children).filter((function(t){return"FORM"===t.tagName}));this.forms.input=null==s?void 0:s.find((function(t){return t.name.match(/input/i)})),this.forms.output=null==s?void 0:s.find((function(t){return t.name.match(/output/i)})),this.forms.input||console.warn("can't find 'input' form in 'root' element ".concat(a)),this.forms.output||console.warn("can't find 'output' form in 'root' element ".concat(a)),this.elements=this.forms.input.elements,this.output=this.forms.output.elements.output,r(f,this).forEach((function(t){return c.forms.input.addEventListener(t,(function(t){return e(h,c,d).call(c,t)}))}))}),[{key:"updateResult",value:function(){e(h,this,v).call(this)}},{key:"addHandler",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(h,this,y).call(this,t,r),e(h,this,p).call(this,t);var i=e(h,this,S).call(this,null!==(n=r.element)&&void 0!==n?n:t),a=e(h,this,b).call(this,t,r);e(h,this,W).call(this,i,a),e(h,this,R).call(this,i,r),e(h,this,g).call(this,i,r)}}])}();function d(t){var n=Array.from(this.elements).find((function(e){return e===t.target}));if(n&&("click"!==t.type||!(n instanceof HTMLInputElement&&r(U,this).includes(n.type)||n instanceof HTMLSelectElement))){var i=this.registry.get(n);if(i){var a=i.name,o=i.callbacks,l=o.format,u=o.auxiliary,c=o.update;if(l&&(n.value=l.call(this,n.value,n)),u&&u.call(this,n.value,n),c){var s=c.call(this,n.value,n);this.result.set(a,s)}e(h,this,v).call(this)}}}function v(){var t,e=[],n=o(this.result);try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=(r[0],r[1].trim());""!==i&&e.push(i)}}catch(t){n.e(t)}finally{n.f()}var a=e.join(" ");this.output instanceof HTMLInputElement?this.output.value=a:this.output.textContent=a}function y(t,e){if("string"!=typeof t||""===t)throw new TypeError("AMTK_Form::addHandler must be a non empty string")}function p(t){this.result.has(t)||this.result.set(t,"")}function S(t){return Array.from(this.elements).filter((function(e){return e.name===t}))}function b(t,e){return{name:t,callbacks:{format:e.format,auxiliary:e.auxiliary,update:e.update}}}function W(t,e){var n=this;t.forEach((function(t){return n.registry.set(t,e)}))}function E(t){var e=this.registry.get(t);this.result.set(e.name,t.value)}function R(t,n){var r=n.checked;if(r){if("string"==typeof r&&(r=[r]),!Array.isArray(r))throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");var i,a=o(r);try{for(a.s();!(i=a.n()).done;){var l=i.value;if("string"!=typeof l)throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");var u,c=o(t);try{for(c.s();!(u=c.n()).done;){var s=u.value;s instanceof HTMLInputElement&&["checkbox","radio"].includes(s.type)&&s.value===l&&(s.checked=!0,e(h,this,E).call(this,s))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}e(h,this,v).call(this)}}function g(t,n){var r=n.init;r&&(r.call(this,t),e(h,this,v).call(this))}function w(){var t,e="",n=o(this.elements.type);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.checked){e+=r.value;break}}}catch(t){n.e(t)}finally{n.f()}var i=this.elements.cor;return e+=i.checked?" ".concat(i.value):""}var M=["HKHB","HRYR","TAPT","UEEA","UEEE","UELL","UERP","UERR","UESO","UESS","UEST","UHBB","UHBI","UHBW","UHHH","UHKK","UHMA","UHMD","UHMM","UHMP","UHNN","UHOO","UHPP","UHSS","UHWW","UIAA","UIBB","UIBS","UIII","UITT","UIUU","ULAA","ULAM","ULAS","ULBC","ULDD","ULKK","ULLI","ULMK","ULMM","ULNN","ULOL","ULOO","ULPB","ULSS","ULWU","ULWW","UMKK","UNAA","UNBB","UNEE","UNII","UNKL","UNKS","UNKY","UNNT","UNOO","UNSS","UNTT","UNWW","UODD","UOHH","UOII","URKA","URKG","URKK","URMG","URML","URMM","URMN","URMO","URMT","URRR","URRY","URSS","URWA","URWI","URWW","USCC","USCM","USDD","USHU","USII","USKK","USMM","USMU","USNN","USNR","USPP","USRK","USRN","USRO","USRR","USSS","USTJ","USTO","USTR","USUU","UUBA","UUBB","UUBC","UUBI","UUBK","UUBP","UUBS","UUBT","UUDD","UUDL","UUEE","UUEM","UUOB","UUOK","UUOL","UUOO","UUOR","UUOT","UUWR","UUWW","UUYH","UUYI","UUYP","UUYS","UUYW","UUYY","UWGG","UWKB","UWKD","UWKE","UWKJ","UWKS","UWLW","UWOO","UWOR","UWPP","UWPS","UWSB","UWSS","UWUB","UWUF","UWUK","UWUU","UWWW"];function H(){var t=this.elements.icao_variants,e=document.createElement("option");e.textContent="Не найдено",e.disabled=!0,e.selected=!0,t.options.length=0,t.add(e)}function A(){var t=this.elements.icao,e=this.elements.icao_variants,n=t.value;if(0===n.length)return function(){this.elements.icao.value=""}(),void H();H();var r,i=o(M);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.startsWith(n)){var l=document.createElement("option");l.value=a,l.textContent=a,e.add(l)}}}catch(t){i.e(t)}finally{i.f()}}function L(){var t=this.elements.icao.value;return 4===t.length?t:""}var O={type:function(t){t.addHandler("type",{checked:"METAR",update:w}),t.addHandler("type",{element:"cor",update:w})},icao:function(t){t.addHandler("icao",{format:function(t){return t.trim().toUpperCase().replace(/[^A-Z]/,"").substring(0,4)},auxiliary:A,update:L}),t.addHandler("icao",{element:"icao_variants",init:A,auxiliary:function(t){this.elements.icao.value=t},update:L})}},T=new m("#amtk_metar_editor");O.type(T),O.icao(T)}();