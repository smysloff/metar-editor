!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function n(e,t,n,r,a,i,u){try{var l=e[i](u),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var u=e.apply(t,r);function l(e){n(u,a,i,l,o,"next",e)}function o(e){n(u,a,i,l,o,"throw",e)}l(void 0)}))}}function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,n){return e.get(t(e,n))}function u(e,t,n){a(e,t),t.set(e,n)}function l(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function c(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var o=r&&r.prototype instanceof l?r:l,c=Object.create(o.prototype);return d(c,"_invoke",function(n,r,a){var i,l,o,c=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,l=0,o=e,f.n=n,u}};function h(n,r){for(l=n,o=r,t=0;!d&&c&&!a&&t<s.length;t++){var a,i=s[t],h=f.p,v=i[2];n>3?(a=v===r)&&(o=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=h&&((a=n<2&&h<i[1])?(l=0,f.v=r,f.n=i[1]):h<v&&(a=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,l=0))}if(a||n>1)return u;throw d=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&h(s,v),l=s,o=v;(t=l<2?e:o)||!d;){i||(l?l<3?(l>1&&(f.n=-1),h(l,o)):f.n=o:f.v=o);try{if(c=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(d=f.n<0)?o:n.call(r,f))!==u)break}catch(t){i=e,l=1,o=t}finally{c=1}}return{value:t,done:d}}}(n,a,i),!0),c}var u={};function l(){}function o(){}function c(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(d(t={},r,(function(){return this})),t),h=c.prototype=l.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,d(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e}return o.prototype=c,d(h,"constructor",c),d(c,"constructor",o),o.displayName="GeneratorFunction",d(c,a,"GeneratorFunction"),d(h),d(h,a,"Generator"),d(h,r,(function(){return this})),d(h,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:i,m:v}})()}function d(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,n,r){function i(t,n){d(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},d(e,t,n,r)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,u,l=[],o=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(o=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw a}}return l}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}var m=new WeakMap,y=new WeakMap,_=new WeakSet,U=function(){return l((function e(n){var r,l,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(r=this,l=_),l.add(r),u(this,m,["text","date","time","radio","checkbox"]),u(this,y,["click","input"]),c(this,"root",null),c(this,"output",null),c(this,"elements",null),c(this,"forms",{input:null,output:null}),c(this,"result",new Map),c(this,"registry",new Map),this.root=document.querySelector(n),this.root||console.warn("can't find a form 'root' with selector ".concat(n));var s=Array.from(this.root.children).filter((function(e){return"FORM"===e.tagName}));this.forms.input=null==s?void 0:s.find((function(e){return e.name.match(/input/i)})),this.forms.output=null==s?void 0:s.find((function(e){return e.name.match(/output/i)})),this.forms.input||console.warn("can't find 'input' form in 'root' element ".concat(n)),this.forms.output||console.warn("can't find 'output' form in 'root' element ".concat(n)),this.elements=this.forms.input.elements,this.output=this.forms.output.elements.output,i(y,this).forEach((function(e){return o.forms.input.addEventListener(e,(function(e){return t(_,o,b).call(o,e)}))}))}),[{key:"updateResult",value:function(){t(_,this,g).call(this)}},{key:"addHandler",value:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(_,this,w).call(this,e,r),t(_,this,k).call(this,e);var a=t(_,this,H).call(this,null!==(n=r.element)&&void 0!==n?n:e),i=t(_,this,S).call(this,e,r);t(_,this,E).call(this,a,i),t(_,this,N).call(this,a,r),t(_,this,T).call(this,a,r)}}])}();function b(e){var n=Array.from(this.elements).find((function(t){return t===e.target}));if(!n){if(!(e.target instanceof HTMLOptionElement))return;n=e.target.parentElement}if("click"!==e.type||!(n instanceof HTMLInputElement&&i(m,this).includes(n.type)||e.target instanceof HTMLSelectElement)){var r=this.registry.get(n);if(r){var a=r.name,u=r.callbacks,l=u.format,o=u.auxiliary,c=u.update;if(l&&(n.value=l.call(this,n.value,n)),o&&o.call(this,n.value,n),c){var s=c.call(this,n.value,n);this.result.set(a,s)}t(_,this,g).call(this)}}}function g(){var e,t=[],n=o(this.result);try{for(n.s();!(e=n.n()).done;){var r=f(e.value,2),a=(r[0],r[1].trim());""!==a&&t.push(a)}}catch(e){n.e(e)}finally{n.f()}var i=t.join(" ");this.output instanceof HTMLInputElement?this.output.value=i:this.output.textContent=i}function w(e,t){if("string"!=typeof e||""===e)throw new TypeError("AMTK_Form::addHandler must be a non empty string")}function k(e){this.result.has(e)||this.result.set(e,"")}function H(e){return Array.from(this.elements).filter((function(t){return t.name===e}))}function S(e,t){return{name:e,callbacks:{format:t.format,auxiliary:t.auxiliary,update:t.update}}}function E(e,t){var n=this;e.forEach((function(e){return n.registry.set(e,t)}))}function x(e){var t=this.registry.get(e);this.result.set(t.name,e.value)}function N(e,n){var r=n.checked;if(r){if("string"==typeof r&&(r=[r]),!Array.isArray(r))throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");var a,i=o(r);try{for(i.s();!(a=i.n()).done;){var u=a.value;if("string"!=typeof u)throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");var l,c=o(e);try{for(c.s();!(l=c.n()).done;){var s=l.value;s instanceof HTMLInputElement&&["checkbox","radio"].includes(s.type)&&s.value===u&&(s.checked=!0,t(_,this,x).call(this,s))}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}t(_,this,g).call(this)}}function T(e,n){var r=n.init;r&&(r.call(this,e),t(_,this,g).call(this))}function M(){var e,t="",n=o(this.elements.type);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.checked){t+=r.value;break}}}catch(e){n.e(e)}finally{n.f()}return t}var O=["UEEA","UEEE","UELL","UERP","UERR","UESO","UESS","UEST","UHBB","UHBI","UHBW","UHHH","UHKK","UHMA","UHMD","UHMM","UHMP","UHNN","UHOO","UHPP","UHSS","UHWW","UIAA","UIBB","UIBS","UIII","UITT","UIUU","ULAA","ULAM","ULAS","ULBC","ULDD","ULKK","ULLI","ULMK","ULMM","ULNN","ULOL","ULOO","ULPB","ULSS","ULWU","ULWW","UMKK","UNAA","UNBB","UNEE","UNII","UNKL","UNKS","UNKY","UNNT","UNOO","UNSS","UNTT","UNWW","UODD","UOHH","UOII","URKA","URKG","URKK","URMG","URML","URMM","URMN","URMO","URMT","URRR","URRY","URSS","URWA","URWI","URWW","USCC","USCM","USDD","USHU","USII","USKK","USMM","USMU","USNN","USNR","USPP","USRK","USRN","USRO","USRR","USSS","USTJ","USTO","USTR","USUU","UUBA","UUBB","UUBC","UUBI","UUBK","UUBP","UUBS","UUBT","UUDD","UUDL","UUEE","UUEM","UUOB","UUOK","UUOL","UUOO","UUOR","UUOT","UUWR","UUWW","UUYH","UUYI","UUYP","UUYS","UUYW","UUYY","UWGG","UWKB","UWKD","UWKE","UWKJ","UWKS","UWLW","UWOO","UWOR","UWPP","UWPS","UWSB","UWSS","UWUB","UWUF","UWUK","UWUU","UWWW"],I=Math.round;function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.elements[e].checked=!1,t&&this.result.set(e,"")}function W(){var e,t=document.querySelector("login"),n=null==t||null===(e=t.dataset)||void 0===e||null===(e=e.firIndex)||void 0===e?void 0:e.trim().toUpperCase();return L(n)?n:"XXXX"}function L(e){return e&&"string"==typeof e&&4===e.length&&/^[A-Z]{4}$/.test(e)}function C(e){return R.apply(this,arguments)}function R(){return(R=r(s().m((function e(t){var n,r,a;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:if(L(t)){e.n=1;break}return e.a(2,[]);case 1:return e.p=2,e.n=3,fetch("/sigmet/modules/taceditor/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({fir:t})});case 3:if((n=e.v).ok){e.n=4;break}throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText));case 4:return e.n=5,n.json();case 5:if(!(r=e.v)||!Array.isArray(r.aerodromes)){e.n=6;break}return e.a(2,r.aerodromes);case 6:return console.warn("Unexpected response structure:",r),e.a(2,[]);case 7:e.n=9;break;case 8:return e.p=8,a=e.v,console.warn("Failed to fetch ICAOs for FIR",t,":",a),e.a(2,[]);case 9:return e.a(2)}}),e,null,[[2,8]])})))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=r(s().m((function e(t){var n,r,a;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:if("XXXX"!==(n=W())||0!==t.length){e.n=1;break}return e.a(2,[]);case 1:return e.p=1,e.n=2,C(n);case 2:return r=e.v,e.a(2,r.length>0?r:O);case 3:return e.p=3,a=e.v,console.error("Error getting ICAOs:",a),e.a(2,O)}}),e,null,[[1,3]])})))).apply(this,arguments)}function K(e){return e.trim().toUpperCase().replace(/[^A-Z]/g,"").substring(0,4)}function j(){return B.apply(this,arguments)}function B(){return B=r(s().m((function e(){var t,n,r,a,i,u,l,c,d,f,h;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=this.elements.icao,n=this.elements.icao_variants,0!==(r=t.value.trim().toUpperCase()).length){e.n=1;break}return Z.call(this),e.a(2);case 1:return X.call(this),e.p=2,e.n=3,D(r);case 3:a=e.v,i=!1,u=o(a);try{for(u.s();!(l=u.n()).done;)(c=l.value).startsWith(r)&&(i=!0,(d=document.createElement("option")).value=c,d.textContent=c,n.add(d))}catch(e){u.e(e)}finally{u.f()}i||X.call(this,!0),e.n=5;break;case 4:e.p=4,h=e.v,console.error("Error updating ICAO assumptions:",h),n.options.length>0?n.options[0].textContent="Ошибка загрузки":((f=document.createElement("option")).textContent="Ошибка загрузки",f.disabled=!0,f.selected=!0,n.add(f));case 5:return e.a(2)}}),e,this,[[2,4]])}))),B.apply(this,arguments)}function G(){var e=this.elements.icao.value.trim().toUpperCase();return 4===e.length?e:""}function Y(e){this.elements.icao.value=e}function F(){this.elements.icao.value=""}function X(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.elements.icao_variants;if(t.options.length=0,e){var n=document.createElement("option");n.textContent="Не найдено",n.disabled=!0,n.selected=!0,t.add(n)}}function Z(){F.call(this),X.call(this,!0)}function q(e,t){return t.checked?e:""}function J(){var e,t,n=this.elements,r=n.date,a=n.time,i=null===(e=r.value)||void 0===e||null===(e=e.split("-"))||void 0===e?void 0:e.at(-1),u=null===(t=a.value)||void 0===t||null===(t=t.split(":"))||void 0===t?void 0:t.join("");return i&&u?"".concat(i).concat(u,"Z"):""}function $(){var e=this.elements,t=e.date,n=e.time,r=new Date,a=r.getUTCFullYear(),i=(r.getUTCMonth()+1).toString().padStart(2,"0"),u=r.getUTCDate().toString().padStart(2,"0"),l=r.getUTCHours().toString().padStart(2,"0"),o=r.getUTCMinutes().toString().padStart(2,"0");t.value="".concat(a,"-").concat(i,"-").concat(u),n.value="".concat(l,":").concat(o)}function z(e,t){t.checked&&(A.call(this,"cor",!0),A.call(this,"auto",!0))}function Q(e){return this.elements.nil.checked?e:""}function V(e,t){t.checked&&A.call(this,"nil",!0)}function ee(e){return this.elements.auto.checked?e:""}var te=Math.min;function ne(e){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.checked="MPS"===r.value}}catch(e){n.e(e)}finally{n.f()}}function re(e,t){var n=this.elements,r=n.direction,a=n.speed,i=n.gust;switch(t){case r:return function(e){var t=3,n=360;return e=e.trim().replace(/\D/g,"").substring(0,t),e=parseInt(e),isNaN(e)?"":te(e,n)}(e);case a:case i:return function(e){var t=2;return e=e.trim().replace(/\D/g,"").substring(0,t),e=parseInt(e),isNaN(e)?"":e}(e);default:throw new Error("Can't find 'format' handler for element ".concat(t))}}function ae(e,t){var n=this.elements,r=n.direction,a=n.direction_range,i=this.elements,u=i.speed,l=i.speed_range,o=this.elements,c=o.gust,s=o.gust_range,d=this.elements;d.units;var f=d.calm,h=d.vrb;return t===f&&t.checked?(r.value="",u.value="",c.value="",a.value=-10,l.value=-1,s.value=-1,void(h.checked=!1)):(f.checked=!1,t.checked?(r.value="",void(a.value="-10")):t===r?(h.checked=!1,void(a.value=""===e?-10:e)):void(t!==u?t!==c||(s.value=""===e?-1:e):l.value=""===e?-1:e))}function ie(e,t){this.elements.calm.checked=!1;var n=this.elements,r=n.direction,a=n.speed,i=n.gust,u=this.elements,l=u.direction_range,o=u.speed_range,c=u.gust_range,s=this.elements.vrb;switch(t===l&&(s.checked=!1),t){case l:r.value="-10"===e?"":parseInt(e);break;case o:a.value="-1"===e?"":parseInt(e);break;case c:i.value="-1"===e?"":parseInt(e)}}function ue(e,t){var n=this.elements,r=n.direction,a=n.speed,i=n.gust,u=this.elements;u.direction_range,u.speed_range,u.gust_range;var l=this.elements,c=l.units,s=l.vrb;if(t===l.calm&&t.checked)return t.value;var d="";if(""===r.value&&!s.checked||""===a.value)return d;d+=s.checked?s.value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return I(Number(e)/t)*t}(r.value,10).toString().padStart(3,"0"),d+=a.value.padStart(2,"0"),Number(i.value)&&Number(i.value)>Number(a.value)&&(0!==Number(r.value)||0!==Number(a.value))&&(d+="G".concat(i.value));var f,h=o(c);try{for(h.s();!(f=h.n()).done;){var v=f.value;if(v.checked){d+="".concat(v.value);break}}}catch(e){h.e(e)}finally{h.f()}return d}for(var le=[-1],oe=0;oe<800;oe+=50)le.push(oe);for(var ce=800;ce<5e3;ce+=100)le.push(ce);for(var se=5e3;se<1e4;se+=1e3)le.push(se);function de(){var e=this.elements.visibility.value;return""===e?"":e.padStart(4,"0")}function fe(e){var t=this.elements.weather;""!==e&&(t.value+=e)}function he(){var e=this.elements.weather.value.trim();return e.length>1?e:""}function ve(e){var t=e.trim();if(""===t)return"";var n=t.substr(0,3).replace(/\D/,"");return Number(n)>120?120:n}function pe(e,t){var n,r,a,i=this.elements,u=i.clouds_1,l=i.clouds_1_coverage,c=i.clouds_1_height,s=i.clouds_1_type,d=this.elements,f=d.clouds_2,h=d.clouds_2_coverage,v=d.clouds_2_height,p=d.clouds_2_type,m=this.elements,y=m.clouds_3,_=m.clouds_3_coverage,U=m.clouds_3_height,b=m.clouds_3_type,g=this.elements,w=g.clouds_4,k=g.clouds_4_coverage,H=g.clouds_4_height,S=g.clouds_4_type;if(u===t||l===t||c===t||Array.from(s).includes(t))n=u.value.trim(),r=l.value,a=s;else if(f===t||h===t||v===t||Array.from(p).includes(t))n=f.value.trim(),r=h.value,a=p;else if(y===t||_===t||U===t||Array.from(b).includes(t))n=y.value.trim(),r=_.value,a=b;else{if(w!==t&&k!==t&&H!==t&&!Array.from(S).includes(t))throw new TypeError("Unable to find the required cloud layer");n=w.value.trim(),r=k.value,a=S}if(""===n)return"";var E="";E+=r,E+=n.padStart(3,"0");var x,N=o(a);try{for(N.s();!(x=N.n()).done;){var T=x.value;T.checked&&(E+=T.value)}}catch(e){N.e(e)}finally{N.f()}return E}function me(e){this.elements.clouds_1_height.value=""===e?-1:+e}function ye(e){this.elements.clouds_1.value=-1===+e?"":e}function _e(e){var t=this.elements,n=t.clouds_1,r=t.clouds_1_height,a=t.clouds_1_type;"NCD"===e&&(n.value="",r.value=-1,a.forEach((function(e){return e.checked=!1})))}function Ue(e,t){var n,r=o(this.elements.clouds_1_type);try{for(r.s();!(n=r.n()).done;){var a=n.value;a!==t&&(a.checked=!1)}}catch(e){r.e(e)}finally{r.f()}}function be(e){this.elements.clouds_2_height.value=""===e?-1:+e}function ge(e){this.elements.clouds_2.value=-1===+e?"":e}function we(e){var t=this.elements,n=t.clouds_2,r=t.clouds_2_height,a=t.clouds_2_type;"NCD"===e&&(n.value="",r.value=-1,a.forEach((function(e){return e.checked=!1})))}function ke(e,t){var n,r=o(this.elements.clouds_2_type);try{for(r.s();!(n=r.n()).done;){var a=n.value;a!==t&&(a.checked=!1)}}catch(e){r.e(e)}finally{r.f()}}function He(e){this.elements.clouds_3_height.value=""===e?-1:+e}function Se(e){this.elements.clouds_3.value=-1===+e?"":e}function Ee(e){var t=this.elements,n=t.clouds_3,r=t.clouds_3_height,a=t.clouds_3_type;"NCD"===e&&(n.value="",r.value=-1,a.forEach((function(e){return e.checked=!1})))}function xe(e,t){var n,r=o(this.elements.clouds_3_type);try{for(r.s();!(n=r.n()).done;){var a=n.value;a!==t&&(a.checked=!1)}}catch(e){r.e(e)}finally{r.f()}}function Ne(e){this.elements.clouds_4_height.value=""===e?-1:+e}function Te(e){this.elements.clouds_4.value=-1===+e?"":e}function Me(e){var t=this.elements,n=t.clouds_4,r=t.clouds_4_height,a=t.clouds_4_type;"NCD"===e&&(n.value="",r.value=-1,a.forEach((function(e){return e.checked=!1})))}function Oe(e,t){var n,r=o(this.elements.clouds_4_type);try{for(r.s();!(n=r.n()).done;){var a=n.value;a!==t&&(a.checked=!1)}}catch(e){r.e(e)}finally{r.f()}}function Ie(e){if("-"===(e=e.trim()))return e;if(""===e||isNaN(e))return"";var t=+e.match(/-?\d?\d?/);return isNaN(t)&&e.startsWith("-")?"-":isNaN(t)?"":t<-80?-80:t>80?80:t}function Ae(){var e=this.elements,t=e.temperature,n=e.dew_point;if(["","-"].includes(t.value)&&["","-"].includes(n.value))return"";var r=isNaN(+t.value)?"":t.value,a=isNaN(+n.value)?"":n.value,i="";return i+=""===r?"/":r.replace("-","M"),i+="/",i+=""===a?"/":a.replace("-","M")}function We(e,t){var n=this.elements,r=n.temperature,a=n.dew_point,i=this.elements,u=i.temperature_range,l=i.dew_point_range,o=this.elements,c=o.temperature_minus,s=o.dew_point_minus,d=null,f=null;switch(t){case r:d=u,f=c;break;case a:d=l,f=s;break;default:throw new TypeError("unknown element")}if(!(d instanceof HTMLInputElement))throw new TypeError("not an input element");if(!(f instanceof HTMLInputElement))throw new TypeError("minusElement is not a proper HTMLInputElement");d.value=""===e||"-"===e?-1:Math.abs(e),f.checked=e.startsWith("-")}function Le(e,t){var n,r=this.elements,a=r.temperature,i=r.dew_point,u=this.elements,l=u.temperature_range,o=u.dew_point_range,c=this.elements,s=c.temperature_minus,d=c.dew_point_minus,f="",h="";switch(t){case l:f=a,h=s;break;case o:f=i,h=d;break;default:throw new Error("unknown element")}if(!(f instanceof HTMLInputElement&&"value"in f))throw new TypeError("linkedElement must be a typeof HTMLInputElement(text), but got ".concat(v(f)));if(!(h instanceof HTMLInputElement)||"checkbox"!==(null===(n=h)||void 0===n?void 0:n.type))throw new TypeError("minusElement must be a typeof HTMLInputElement(checkbox), but got ".concat(v(h)));f.value=e<0?"":h.checked?"-".concat(e):e}function Ce(e,t){var n=e<900||e>1100?"":e;return""===n?"":"Q".concat(n)}le.push(9999);var Re={type:function(e){e.addHandler("type",{checked:"METAR",update:M})},icao:function(e){e.addHandler("icao",{format:K,auxiliary:j,update:G}),e.addHandler("icao",{element:"icao_variants",init:j,auxiliary:Y,update:G})},cor:function(e){e.addHandler("cor",{update:q})},datetime:function(e){e.addHandler("datetime",{element:"date",update:J}),e.addHandler("datetime",{element:"time",update:J}),e.addHandler("datetime",{element:"current",auxiliary:$,update:J})},nil:function(e){e.addHandler("nil",{auxiliary:z,update:Q})},auto:function(e){e.addHandler("auto",{auxiliary:V,update:ee})},wind:function(e){e.addHandler("wind",{element:"calm",auxiliary:ae,update:ue}),e.addHandler("wind",{element:"units",init:ne,update:ue}),e.addHandler("wind",{element:"direction",format:re,auxiliary:ae,update:ue}),e.addHandler("wind",{element:"speed",format:re,auxiliary:ae,update:ue}),e.addHandler("wind",{element:"gust",format:re,auxiliary:ae,update:ue}),e.addHandler("wind",{element:"direction_range",auxiliary:ie,update:ue}),e.addHandler("wind",{element:"speed_range",auxiliary:ie,update:ue}),e.addHandler("wind",{element:"gust_range",auxiliary:ie,update:ue}),e.addHandler("wind",{element:"vrb",auxiliary:ae,update:ue})},cavok:function(e){e.addHandler("cavok",{element:"cavok",auxiliary:function(e,t){var n=this.result,r=this.elements,a=r.visibility,i=r.visibility_range,u=this.elements,l=u.weather,o=u.intensity,c=u.precipitation,s=u.phenomena,d=this.elements,f=d.clouds_1_coverage,h=d.clouds_1,v=d.clouds_1_type,p=d.clouds_1_height,m=this.elements,y=m.clouds_2_coverage,_=m.clouds_2,U=m.clouds_2_type,b=m.clouds_2_height,g=this.elements,w=g.clouds_3_coverage,k=g.clouds_3,H=g.clouds_3_type,S=g.clouds_3_height,E=this.elements,x=E.clouds_4_coverage,N=E.clouds_4,T=E.clouds_4_type,M=E.clouds_4_height;t.checked?(a.value="",i.value=-1,l.value="",o.forEach((function(e){return e.checked=!1})),c.value="",s.value="",f.value="NCD",h.value="",v.forEach((function(e){return e.checked=!1})),p.value=-1,y.value="NCD",_.value="",U.forEach((function(e){return e.checked=!1})),b.value=-1,w.value="NCD",k.value="",H.forEach((function(e){return e.checked=!1})),S.value=-1,x.value="NCD",N.value="",T.forEach((function(e){return e.checked=!1})),M.value=-1,a.disabled=!0,i.disabled=!0,l.disabled=!0,o.forEach((function(e){return e.disabled=!0})),c.disabled=!0,s.disabled=!0,f.disabled=!0,h.disabled=!0,v.forEach((function(e){return e.disabled=!0})),p.disabled=!0,y.disabled=!0,_.disabled=!0,U.forEach((function(e){return e.disabled=!0})),b.disabled=!0,w.disabled=!0,k.disabled=!0,H.forEach((function(e){return e.disabled=!0})),S.disabled=!0,x.disabled=!0,N.disabled=!0,T.forEach((function(e){return e.disabled=!0})),M.disabled=!0,n.set("visibility",""),n.set("weather",""),n.set("clouds_1",""),n.set("clouds_2",""),n.set("clouds_3",""),n.set("clouds_4","")):(a.disabled=!1,i.disabled=!1,l.disabled=!1,o.forEach((function(e){return e.disabled=!1})),c.disabled=!1,s.disabled=!1,f.disabled=!1,h.disabled=!1,v.forEach((function(e){return e.disabled=!1})),p.disabled=!1,y.disabled=!1,_.disabled=!1,U.forEach((function(e){return e.disabled=!1})),b.disabled=!1,w.disabled=!1,k.disabled=!1,H.forEach((function(e){return e.disabled=!1})),S.disabled=!1,x.disabled=!1,N.disabled=!1,T.forEach((function(e){return e.disabled=!1})),M.disabled=!1)},update:function(e,t){return t.checked?t.value:""}})},visibility:function(e){e.addHandler("visibility",{format:function(e){return e.trim().replace(/\D/,"").substring(0,4)},auxiliary:function(e){var t=this.elements.visibility_range;""===e&&(t.value=-1);var n=Number(e),r=n<800?50:n<5e3?100:n<9999?1e3:0,a=le.at(-1);if(r>0){var i=Math.floor(n/r)*r;a=le.indexOf(i)}t.value=a.toString()},update:de}),e.addHandler("visibility",{element:"visibility_range",init:function(e){var t=e[0];t.setAttribute("min",0),t.setAttribute("max",le.length-1),t.value=le[0]},auxiliary:function(e){e=+e,this.elements.visibility.value=0===e?"":le[e]},update:de})},weather:function(e){e.addHandler("weather",{element:"weather",format:function(e){return e.toUpperCase().replace(/[^-+A-Z ]/,"")},auxiliary:function(e){var t,n=this.elements.intensity,r=e[0],a=o(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.checked=i.value===r}}catch(e){a.e(e)}finally{a.f()}},update:he}),e.addHandler("weather",{element:"intensity",auxiliary:function(e,t){var n,r="",a=this.elements,i=a.intensity,u=a.weather,l=o(i);try{for(l.s();!(n=l.n()).done;){var c=n.value;c!==t&&(c.checked=!1),c.checked&&(r=c.value)}}catch(e){l.e(e)}finally{l.f()}u.value=u.value.replace(/^[+-]/,""),r&&(u.value=r+u.value)},update:he}),e.addHandler("weather",{element:"precipitation",auxiliary:fe,update:he}),e.addHandler("weather",{element:"phenomena",auxiliary:fe,update:he})},clouds:function(e){e.addHandler("clouds_1",{element:"clouds_1",format:ve,auxiliary:me,update:pe}),e.addHandler("clouds_1",{element:"clouds_1_height",auxiliary:ye,update:pe}),e.addHandler("clouds_1",{element:"clouds_1_coverage",auxiliary:_e,update:pe}),e.addHandler("clouds_1",{element:"clouds_1_type",auxiliary:Ue,update:pe}),e.addHandler("clouds_2",{element:"clouds_2",format:ve,auxiliary:be,update:pe}),e.addHandler("clouds_2",{element:"clouds_2_height",auxiliary:ge,update:pe}),e.addHandler("clouds_2",{element:"clouds_2_coverage",auxiliary:we,update:pe}),e.addHandler("clouds_2",{element:"clouds_2_type",auxiliary:ke,update:pe}),e.addHandler("clouds_3",{element:"clouds_3",format:ve,auxiliary:He,update:pe}),e.addHandler("clouds_3",{element:"clouds_3_height",auxiliary:Se,update:pe}),e.addHandler("clouds_3",{element:"clouds_3_coverage",auxiliary:Ee,update:pe}),e.addHandler("clouds_3",{element:"clouds_3_type",auxiliary:xe,update:pe}),e.addHandler("clouds_4",{element:"clouds_4",format:ve,auxiliary:Ne,update:pe}),e.addHandler("clouds_4",{element:"clouds_4_height",auxiliary:Te,update:pe}),e.addHandler("clouds_4",{element:"clouds_4_coverage",auxiliary:Me,update:pe}),e.addHandler("clouds_4",{element:"clouds_4_type",auxiliary:Oe,update:pe})},temperature:function(e){function t(e,t){var n=this.elements,r=n.temperature,a=n.dew_point,i="",u="";switch(t.checked&&(u+="-"),t.name){case"temperature_minus":i=r;break;case"dew_point_minus":i=a;break;default:throw TypeError("unknown element name")}u+=i.value.replace(/\D/,""),isNaN(u)||(i.value=u)}e.addHandler("temperature",{element:"temperature",format:Ie,auxiliary:We,update:Ae}),e.addHandler("temperature",{element:"dew_point",format:Ie,auxiliary:We,update:Ae}),e.addHandler("temperature",{element:"temperature_range",auxiliary:Le,update:Ae}),e.addHandler("temperature",{element:"dew_point_range",auxiliary:Le,update:Ae}),e.addHandler("temperature",{element:"temperature_minus",auxiliary:t,update:Ae}),e.addHandler("temperature",{element:"dew_point_minus",auxiliary:t,update:Ae})},pressure:function(e){e.addHandler("pressure",{format:function(e){var t=e.trim().replace(/\D/,"").substring(0,4);return""===t?"":Number(t)>1100?1100:t},auxiliary:function(e){this.elements.pressure_range.value=""===e||Number(e)<500?499:e},update:Ce}),e.addHandler("pressure",{element:"pressure_range",auxiliary:function(e){this.elements.pressure.value=499===Number(e)?"":e},update:Ce})},trend:function(e){e.addHandler("trend",{element:"trend_text",format:function(e){return e.trim().toUpperCase()},update:function(e){return e}})}},De=new U("#amtk_metar_editor");Re.type(De),Re.cor(De),Re.icao(De),Re.datetime(De),Re.nil(De),Re.auto(De),Re.wind(De),Re.cavok(De),Re.visibility(De),Re.weather(De),Re.clouds(De),Re.temperature(De),Re.pressure(De),Re.trend(De)}();