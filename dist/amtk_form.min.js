var e=Object.defineProperty,t=e=>{throw TypeError(e)},a=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n),n=(e,a,n)=>a.has(e)||t("Cannot "+n),l=(e,t,a)=>(n(e,t,"read from private field"),a?a.call(e):t.get(e)),s=(e,a,n)=>a.has(e)?t("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(e):a.set(e,n),i=(e,t,a)=>(n(e,t,"access private method"),a);(async()=>{var e,t,n,r,d,u,o,c,h,m,p,f,_;const U=["HKHB","HRYR","TAPT","UEEA","UEEE","UELL","UERP","UERR","UESO","UESS","UEST","UHBB","UHBI","UHBW","UHHH","UHKK","UHMA","UHMD","UHMM","UHMP","UHNN","UHOO","UHPP","UHSS","UHWW","UIAA","UIBB","UIBS","UIII","UITT","UIUU","ULAA","ULAM","ULAS","ULBC","ULDD","ULKK","ULLI","ULMK","ULMM","ULNN","ULOL","ULOO","ULPB","ULSS","ULWU","ULWW","UMKK","UNAA","UNBB","UNEE","UNII","UNKL","UNKS","UNKY","UNNT","UNOO","UNSS","UNTT","UNWW","UODD","UOHH","UOII","URKA","URKG","URKK","URMG","URML","URMM","URMN","URMO","URMT","URRR","URRY","URSS","URWA","URWI","URWW","USCC","USCM","USDD","USHU","USII","USKK","USMM","USMU","USNN","USNR","USPP","USRK","USRN","USRO","USRR","USSS","USTJ","USTO","USTR","USUU","UUBA","UUBB","UUBC","UUBI","UUBK","UUBP","UUBS","UUBT","UUDD","UUDL","UUEE","UUEM","UUOB","UUOK","UUOL","UUOO","UUOR","UUOT","UUWR","UUWW","UUYH","UUYI","UUYP","UUYS","UUYW","UUYY","UWGG","UWKB","UWKD","UWKE","UWKJ","UWKS","UWLW","UWOO","UWOR","UWPP","UWPS","UWSB","UWSS","UWUB","UWUF","UWUK","UWUU","UWWW"],v=[-1];for(let a=0;a<800;a+=50)v.push(a);for(let a=800;a<5e3;a+=100)v.push(a);for(let a=5e3;a<1e4;a+=1e3)v.push(a);v.push(9999);e=new WeakMap,t=new WeakMap,n=new WeakSet,r=function(t){const a=Array.from(this.elements).find((e=>e===t.target));if(!a)return;if("click"===t.type&&(a instanceof HTMLInputElement&&l(this,e).includes(a.type)||a instanceof HTMLSelectElement))return;const s=this.registry.get(a);if(!s)return;const{name:r}=s,{format:u,auxiliary:o,update:c}=s.callbacks;if(u&&(a.value=u.call(this,a.value,a)),o&&o.call(this,a.value,a),c){const e=c.call(this,a.value,a);this.result.set(r,e)}i(this,n,d).call(this)},d=function(){const e=[];for(const[a,n]of this.result){const t=n.trim();""!==t&&e.push(t)}const t=e.join(" ");this.output instanceof HTMLInputElement?this.output.value=t:this.output.textContent=t},u=function(e,t){if("string"!=typeof e||""===e)throw new TypeError("AMTK_Form::addHandler must be a non empty string")},o=function(e){this.result.has(e)||this.result.set(e,"")},c=function(e){return Array.from(this.elements).filter((t=>t.name===e))},h=function(e,{format:t,auxiliary:a,update:n}){return{name:e,callbacks:{format:t,auxiliary:a,update:n}}},m=function(e,t){e.forEach((e=>this.registry.set(e,t)))},p=function(e){const t=this.registry.get(e);this.result.set(t.name,e.value)},f=function(e,{checked:t}){if(t){if("string"==typeof t&&(t=[t]),!Array.isArray(t))throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");for(const a of t){if("string"!=typeof a)throw new TypeError("'checked' must be 'string', 'array of strings' or 'null'");for(const t of e)t instanceof HTMLInputElement&&["checkbox","radio"].includes(t.type)&&t.value===a&&(t.checked=!0,i(this,n,p).call(this,t))}i(this,n,d).call(this)}},_=function(e,{init:t}){t&&(t.call(this,e),i(this,n,d).call(this))};const y=new class{constructor(d){s(this,n),s(this,e,["text","date","time","radio","checkbox"]),s(this,t,["click","input"]),a(this,"root",null),a(this,"output",null),a(this,"elements",null),a(this,"forms",{input:null,output:null}),a(this,"result",new Map),a(this,"registry",new Map),this.root=document.querySelector(d),this.root||console.warn(`can't find a form 'root' with selector ${d}`);const u=Array.from(this.root.children).filter((e=>"FORM"===e.tagName));this.forms.input=null==u?void 0:u.find((e=>e.name.match(/input/i))),this.forms.output=null==u?void 0:u.find((e=>e.name.match(/output/i))),this.forms.input||console.warn(`can't find 'input' form in 'root' element ${d}`),this.forms.output||console.warn(`can't find 'output' form in 'root' element ${d}`),this.elements=this.forms.input.elements,this.output=this.forms.output.elements.output,l(this,t).forEach((e=>this.forms.input.addEventListener(e,(e=>i(this,n,r).call(this,e)))))}updateResult(){i(this,n,d).call(this)}addHandler(e,t={}){i(this,n,u).call(this,e,t),i(this,n,o).call(this,e);const a=i(this,n,c).call(this,t.element??e),l=i(this,n,h).call(this,e,t);i(this,n,m).call(this,a,l),i(this,n,f).call(this,a,t),i(this,n,_).call(this,a,t)}}("#amtk_metar_editor");function g(){let e="";for(const a of this.elements.type)if(a.checked){e+=a.value;break}const{cor:t}=this.elements;return e+=t.checked?` ${t.value}`:"",e}function b(){const{icao:e,icao_variants:t}=this.elements,{value:a}=e;t.innerHTML="";for(const n of U)if(n.startsWith(a)){const e=document.createElement("option");e.value=n,e.textContent=n,t.append(e)}}function H(){const{icao:e}=this.elements,{value:t}=e;return 4===t.length?t:""}function k(e){var t,a,n,l;const{date:s,time:i}=this.elements,r=null==(a=null==(t=s.value)?void 0:t.split("-"))?void 0:a.at(-1),d=null==(l=null==(n=i.value)?void 0:n.split(":"))?void 0:l.join("");return r&&d?`${r}${d}Z`:""}function w(){const{units:e}=this.elements,{direction:t,speed:a,gust:n}=this.elements,{direction_range:l,speed_range:s,gust_range:i}=this.elements,{vrb:r}=this.elements;let d="";if(""===t.value||""===a.value)return d;d+=`${t.value.padStart(3,"0")}${a.value.padStart(2,"0")}`,+n.value>+a.value&&(d+="G"+ +n.value);for(const u of e)if(u.checked){d+=`${u.value}`;break}return d}function E(e,t){const{direction:a,speed:n,gust:l}=this.elements,{direction_range:s,speed_range:i,gust_range:r}=this.elements;switch(t){case s:a.value="-10"===e?"":parseInt(e);break;case i:n.value="-1"===e?"":parseInt(e);break;case r:l.value="-1"===e?"":parseInt(e)}}function S(){const{visibility:e}=this.elements,{value:t}=e;return""===t?"":t.padStart(4,"0")}function x(e){const{weather:t}=this.elements;""!==e&&(t.value+=e)}function M(){const{weather:e}=this.elements,t=e.value.trim();return t.length>1?t:""}function N(e){if(""===(e=e.trim()))return"";const t=e.substr(0,3).replace(/\D/,"");return+t>120?120:t}function W(){let{clouds_1:e,clouds_1_coverage:t,clouds_1_type:a}=this.elements;if(e=e.value.trim(),t=t.value,""===e||"NCD"===t)return"";let n="";n+=t,n+=e.padStart(3,"0");for(const l of a)l.checked&&(n+=l.value);return n}function T(){let{clouds_2:e,clouds_2_coverage:t,clouds_2_type:a}=this.elements;if(e=e.value.trim(),t=t.value,""===e||"NCD"===t)return"";let n="";n+=t,n+=e.padStart(3,"0");for(const l of a)l.checked&&(n+=l.value);return n}function L(){let{clouds_3:e,clouds_3_coverage:t,clouds_3_type:a}=this.elements;if(e=e.value.trim(),t=t.value,""===e||"NCD"===t)return"";let n="";n+=t,n+=e.padStart(3,"0");for(const l of a)l.checked&&(n+=l.value);return n}function R(){let{clouds_4:e,clouds_4_coverage:t,clouds_4_type:a}=this.elements;if(e=e.value.trim(),t=t.value,""===e||"NCD"===t)return"";let n="";n+=t,n+=e.padStart(3,"0");for(const l of a)l.checked&&(n+=l.value);return n}function I(e){if("-"===(e=e.trim()))return e;if(""===e||isNaN(e))return"";const t=+e.match(/-?\d?\d?/);return isNaN(t)&&e.startsWith("-")?"-":isNaN(t)?"":t<-80?-80:t>80?80:t}function D(){const{temperature:e,dew_point:t}=this.elements;if(["","-"].includes(e.value)&&["","-"].includes(t.value))return"";const a=isNaN(+e.value)?"":e.value,n=isNaN(+t.value)?"":t.value;let l="";return l+=""===a?"/":a.replace("-","M"),l+="/",l+=""===n?"/":n.replace("-","M"),l}function C(e,t){const{temperature:a,dew_point:n}=this.elements,{temperature_range:l,dew_point_range:s}=this.elements,{temperature_minus:i,dew_point_minus:r}=this.elements;let d=null,u=null;switch(t){case a:d=l,u=i;break;case n:d=s,u=r;break;default:throw new TypeError("unknown element")}if(!(d instanceof HTMLInputElement))throw new TypeError("not an input element");if(!(u instanceof HTMLInputElement))throw new TypeError("minusElement is not a proper HTMLInputElement");d.value=""===e||"-"===e?-1:Math.abs(e),u.checked=e.startsWith("-")}function K(e,t){const{temperature:a,dew_point:n}=this.elements,{temperature_range:l,dew_point_range:s}=this.elements,{temperature_minus:i,dew_point_minus:r}=this.elements;let d="",u="";switch(t){case l:d=a,u=i;break;case s:d=n,u=r;break;default:throw new Error("unknown element")}if(!(d instanceof HTMLInputElement&&"value"in d))throw new TypeError("linkedElement must be a typeof HTMLInputElement(text), but got "+typeof d);if(!(u instanceof HTMLInputElement)||"checkbox"!==(null==u?void 0:u.type))throw new TypeError("minusElement must be a typeof HTMLInputElement(checkbox), but got "+typeof u);e<0?d.value="":(u.checked&&(e=`-${e}`),d.value=e)}function O(e,t){const{temperature:a,dew_point:n}=this.elements;let l="",s="";switch(t.checked&&(s+="-"),t.name){case"temperature_minus":l=a;break;case"dew_point_minus":l=n;break;default:throw TypeError("unknown element name")}s+=l.value.replace(/\D/,""),isNaN(s)||(l.value=s)}function A(e,t){const a=e<900||e>1100?"":e;return""===a?"":`Q${a}`}y.addHandler("type",{checked:"METAR",update:g}),y.addHandler("type",{element:"cor",update:g}),y.addHandler("icao",{format:e=>e.trim().toUpperCase().replace(/[^A-Z]/,"").substring(0,4),auxiliary:b,update:H}),y.addHandler("icao",{element:"icao_variants",init:b,auxiliary(e,t){const{icao:a}=this.elements;a.value=e},update:H}),y.addHandler("datetime",{element:"date",update:k}),y.addHandler("datetime",{element:"time",update:k}),y.addHandler("datetime",{element:"current",auxiliary:function(){const{date:e,time:t}=this.elements,a=new Date,n=a.getUTCFullYear(),l=(a.getUTCMonth()+1).toString().padStart(2,"0"),s=a.getUTCDate().toString().padStart(2,"0"),i=a.getUTCHours().toString().padStart(2,"0"),r=a.getUTCMinutes().toString().padStart(2,"0");e.value=`${n}-${l}-${s}`,t.value=`${i}:${r}`},update:k}),y.addHandler("wind",{element:"calm",auxiliary(e,t){const{units:a}=this.elements,{direction:n,speed:l,gust:s}=this.elements,{direction_range:i,speed_range:r,gust_range:d}=this.elements;a.forEach((e=>e.disabled=t.checked)),n.disabled=t.checked,l.disabled=t.checked,s.disabled=t.checked,i.disabled=t.checked,r.disabled=t.checked,d.disabled=t.checked,t.checked&&(a.forEach((e=>e.checked="MPS"===e.value)),n.value="",l.value="",s.value="",i.value=-10,r.value=-1,d.value=-1)},update:(e,t)=>t.checked?"CALM":""}),y.addHandler("wind",{element:"units",init(e){for(const t of e)t.checked="MPS"===t.value},update:w}),y.addHandler("wind",{element:"direction",format(e){const t=parseInt(e.trim().replace(/\D/,"").substring(0,3));return isNaN(t)?"":t>360?360:t},auxiliary(e){const{direction_range:t}=this.elements;t.value=""===e?-20:e},update:w}),y.addHandler("wind",{element:"speed",format:e=>parseInt(e.trim().replace(/\D/,"").substring(0,2)),auxiliary(e){const{speed_range:t}=this.elements;t.value=e},update:w}),y.addHandler("wind",{element:"gust",format:e=>parseInt(e.trim().replace(/\D/,"").substring(0,2)),auxiliary(e){const{gust_range:t}=this.elements;t.value=e},update:w}),y.addHandler("wind",{element:"direction_range",auxiliary:E,update:w}),y.addHandler("wind",{element:"speed_range",auxiliary:E,update:w}),y.addHandler("wind",{element:"gust_range",auxiliary:E,update:w}),y.addHandler("cavok",{element:"cavok",auxiliary(e,t){const{result:a}=this,{visibility:n,visibility_range:l}=this.elements,{weather:s,intensity:i,precipitation:r,phenomena:d}=this.elements,{clouds_1_coverage:u,clouds_1:o,clouds_1_type:c,clouds_1_height:h}=this.elements,{clouds_2_coverage:m,clouds_2:p,clouds_2_type:f,clouds_2_height:_}=this.elements,{clouds_3_coverage:U,clouds_3:v,clouds_3_type:y,clouds_3_height:g}=this.elements,{clouds_4_coverage:b,clouds_4:H,clouds_4_type:k,clouds_4_height:w}=this.elements;t.checked?(n.value="",l.value=-1,s.value="",i.forEach((e=>e.checked=!1)),r.value="",d.value="",u.value="NCD",o.value="",c.forEach((e=>e.checked=!1)),h.value=-1,m.value="NCD",p.value="",f.forEach((e=>e.checked=!1)),_.value=-1,U.value="NCD",v.value="",y.forEach((e=>e.checked=!1)),g.value=-1,b.value="NCD",H.value="",k.forEach((e=>e.checked=!1)),w.value=-1,n.disabled=!0,l.disabled=!0,s.disabled=!0,i.forEach((e=>e.disabled=!0)),r.disabled=!0,d.disabled=!0,u.disabled=!0,o.disabled=!0,c.forEach((e=>e.disabled=!0)),h.disabled=!0,m.disabled=!0,p.disabled=!0,f.forEach((e=>e.disabled=!0)),_.disabled=!0,U.disabled=!0,v.disabled=!0,y.forEach((e=>e.disabled=!0)),g.disabled=!0,b.disabled=!0,H.disabled=!0,k.forEach((e=>e.disabled=!0)),w.disabled=!0,a.set("visibility",""),a.set("weather",""),a.set("clouds_1",""),a.set("clouds_2",""),a.set("clouds_3",""),a.set("clouds_4","")):(n.disabled=!1,l.disabled=!1,s.disabled=!1,i.forEach((e=>e.disabled=!1)),r.disabled=!1,d.disabled=!1,u.disabled=!1,o.disabled=!1,c.forEach((e=>e.disabled=!1)),h.disabled=!1,m.disabled=!1,p.disabled=!1,f.forEach((e=>e.disabled=!1)),_.disabled=!1,U.disabled=!1,v.disabled=!1,y.forEach((e=>e.disabled=!1)),g.disabled=!1,b.disabled=!1,H.disabled=!1,k.forEach((e=>e.disabled=!1)),w.disabled=!1)},update:(e,t)=>t.checked?t.value:""}),y.addHandler("visibility",{format:e=>e.trim().replace(/\D/,"").substring(0,4),auxiliary(e){const{visibility_range:t}=this.elements;""===e&&(t.value=-1);const a=+e,n=a<800?50:a<5e3?100:a<9999?1e3:0;let l=v.at(-1);if(n>0){const e=Math.floor(a/n)*n;l=v.indexOf(e)}t.value=l.toString()},update:S}),y.addHandler("visibility",{element:"visibility_range",init(e){const t=e[0];t.setAttribute("min",0),t.setAttribute("max",v.length-1),t.value=v[0]},auxiliary(e){e=+e;const{visibility:t}=this.elements;t.value=0===e?"":v[e]},update:S}),y.addHandler("weather",{element:"weather",format:e=>e.toUpperCase().replace(/[^-+A-Z ]/,""),auxiliary(e){const{intensity:t}=this.elements,a=e[0];for(const n of t)n.checked=n.value===a},update:M}),y.addHandler("weather",{element:"intensity",auxiliary(e,t){let a="";const{intensity:n,weather:l}=this.elements;for(const s of n)s!==t&&(s.checked=!1),s.checked&&(a=s.value);l.value=l.value.replace(/^[+-]/,""),a&&(l.value=a+l.value)},update:M}),y.addHandler("weather",{element:"precipitation",auxiliary:x,update:M}),y.addHandler("weather",{element:"phenomena",auxiliary:x,update:M}),y.addHandler("clouds_1",{element:"clouds_1",format:N,auxiliary:function(e){const{clouds_1_height:t}=this.elements;t.value=""===e?-1:+e},update:W}),y.addHandler("clouds_1",{element:"clouds_1_height",auxiliary:function(e){const{clouds_1:t}=this.elements;t.value=-1===+e?"":e},update:W}),y.addHandler("clouds_1",{element:"clouds_1_coverage",auxiliary:function(e){const{clouds_1:t,clouds_1_height:a,clouds_1_type:n}=this.elements;"NCD"===e&&(t.value="",a.value=-1,n.forEach((e=>e.checked=!1)))},update:W}),y.addHandler("clouds_1",{element:"clouds_1_type",auxiliary:function(e,t){const{clouds_1_type:a}=this.elements;for(const n of a)n!==t&&(n.checked=!1)},update:W}),y.addHandler("clouds_2",{element:"clouds_2",format:N,auxiliary:function(e){const{clouds_2_height:t}=this.elements;t.value=""===e?-1:+e},update:T}),y.addHandler("clouds_2",{element:"clouds_2_height",auxiliary:function(e){const{clouds_2:t}=this.elements;t.value=-1===+e?"":e},update:T}),y.addHandler("clouds_2",{element:"clouds_2_coverage",auxiliary:function(e){const{clouds_2:t,clouds_2_height:a,clouds_2_type:n}=this.elements;"NCD"===e&&(t.value="",a.value=-1,n.forEach((e=>e.checked=!1)))},update:T}),y.addHandler("clouds_2",{element:"clouds_2_type",auxiliary:function(e,t){const{clouds_2_type:a}=this.elements;for(const n of a)n!==t&&(n.checked=!1)},update:T}),y.addHandler("clouds_3",{element:"clouds_3",format:N,auxiliary:function(e){const{clouds_3_height:t}=this.elements;t.value=""===e?-1:+e},update:L}),y.addHandler("clouds_3",{element:"clouds_3_height",auxiliary:function(e){const{clouds_3:t}=this.elements;t.value=-1===+e?"":e},update:L}),y.addHandler("clouds_3",{element:"clouds_3_coverage",auxiliary:function(e){const{clouds_3:t,clouds_3_height:a,clouds_3_type:n}=this.elements;"NCD"===e&&(t.value="",a.value=-1,n.forEach((e=>e.checked=!1)))},update:L}),y.addHandler("clouds_3",{element:"clouds_3_type",auxiliary:function(e,t){const{clouds_3_type:a}=this.elements;for(const n of a)n!==t&&(n.checked=!1)},update:L}),y.addHandler("clouds_4",{element:"clouds_4",format:N,auxiliary:function(e){const{clouds_4_height:t}=this.elements;t.value=""===e?-1:+e},update:R}),y.addHandler("clouds_4",{element:"clouds_4_height",auxiliary:function(e){const{clouds_4:t}=this.elements;t.value=-1===+e?"":e},update:R}),y.addHandler("clouds_4",{element:"clouds_4_coverage",auxiliary:function(e){const{clouds_4:t,clouds_4_height:a,clouds_4_type:n}=this.elements;"NCD"===e&&(t.value="",a.value=-1,n.forEach((e=>e.checked=!1)))},update:R}),y.addHandler("clouds_4",{element:"clouds_4_type",auxiliary:function(e,t){const{clouds_4_type:a}=this.elements;for(const n of a)n!==t&&(n.checked=!1)},update:R}),y.addHandler("temperature",{element:"temperature",format:I,auxiliary:C,update:D}),y.addHandler("temperature",{element:"dew_point",format:I,auxiliary:C,update:D}),y.addHandler("temperature",{element:"temperature_range",auxiliary:K,update:D}),y.addHandler("temperature",{element:"dew_point_range",auxiliary:K,update:D}),y.addHandler("temperature",{element:"temperature_minus",auxiliary:O,update:D}),y.addHandler("temperature",{element:"dew_point_minus",auxiliary:O,update:D}),y.addHandler("pressure",{format:e=>""===(e=e.trim().replace(/\D/,"").substring(0,4))?"":+e>1100?1100:e,auxiliary(e){const{pressure_range:t}=this.elements;t.value=""===e||+e<500?499:e},update:A}),y.addHandler("pressure",{element:"pressure_range",auxiliary(e){const{pressure:t}=this.elements;t.value=499===+e?"":e},update:A}),y.addHandler("trend",{element:"trend_text",format:e=>e.trim().toUpperCase(),update:e=>e})})();
